# JustMessenger

JustMessenger - это гибридный мессенджер, поддерживающий как централизованную клиент-серверную архитектуру, так и децентрализованную P2P-связь. Приложение предоставляет функционал текстового чата и голосовых звонков.

## Основные функции

-   **Гибридная архитектура**:
    -   **Клиент-Сервер**: Классический режим, где все сообщения проходят через центральный сервер.
    -   **P2P (Интернет)**: Децентрализованный режим, использующий DHT (Kademlia) для обнаружения пользователей и STUN для обхода NAT, позволяя пользователям общаться напрямую.
    -   **P2P (Локальная сеть)**: Режим для общения в пределах одной локальной сети без необходимости подключения к интернету.
-   **Текстовый чат**: Обмен сообщениями в реальном времени.
-   **Голосовые звонки**: P2P-звонки с использованием PyAudio и UDP Hole Punching для прямого соединения.
-   **Обнаружение пользователей**: В режиме P2P (Интернет) используется DHT на базе Kademlia для поиска и подключения к другим пользователям.
-   **Плагины**: Поддержка плагинов для расширения функциональности.
-   **Кастомизация**: Возможность переключения между светлой и темной темами оформления.

## Технологии

-   **Язык**: Python 3
-   **GUI**: PyQt6
-   **Аудио**: PyAudio
-   **P2P Сеть**:
    -   **DHT**: `kademlia`
    -   **NAT Traversal**: `pystun3`

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <URL репозитория>
    cd <папка проекта>
    ```

2.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    # Для Windows
    python -m venv venv
    .\venv\Scripts\activate

    # Для macOS/Linux
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r VoiceChat/requirements.txt
    ```
    *Примечание: Для установки `PyAudio` на некоторых системах могут потребоваться дополнительные зависимости. См. [документацию PortAudio](http://www.portaudio.com/docs/v19-doxydocs/tutorial_start.html).*

## Запуск

### 1. Сервер (для клиент-серверного режима)

Для работы в режиме "Клиент-Сервер" необходимо сначала запустить сервер.
```bash
python VoiceChat/server/server.py
```
Сервер запустится на `127.0.0.1:12345`.

### 2. Клиент

Запустите клиентский скрипт:
```bash
python VoiceChat/client/client.py
```
При запуске появится диалоговое окно, в котором нужно выбрать один из трех режимов работы:
-   `Клиент-Сервер`
-   `P2P (Интернет)`
-   `P2P (Локальная сеть)`

После выбора режима и ввода имени пользователя откроется главное окно чата.

## Структура проекта

```
.
├── VoiceChat/
│   ├── client/         # Исходный код клиента
│   │   ├── client.py
│   │   ├── p2p_manager.py
│   │   ├── config_manager.py
│   │   └── ...
│   ├── server/         # Исходный код сервера
│   │   ├── server.py
│   │   └── ...
│   ├── plugins/        # Папка для плагинов
│   │   └── example_plugin/
│   ├── README.md       # Этот файл
│   └── requirements.txt # Список зависимостей
└── ...
